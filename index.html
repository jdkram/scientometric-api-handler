<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Scientometric-API-handler : A set of scripts for retrieving bibliometric &amp; scientometric information for batches of publications.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Scientometric-API-handler</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jdkram/scientometric-api-handler">View on GitHub</a>

          <h1 id="project_title">Scientometric-API-handler</h1>
          <h2 id="project_tagline">A set of scripts for retrieving bibliometric &amp; scientometric information for batches of publications.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jdkram/scientometric-api-handler/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jdkram/scientometric-api-handler/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="scientometric-api-handler" class="anchor" href="#scientometric-api-handler" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scientometric API Handler</h1>

<p>A tool for batch downloading and inspecting hypotheses from a number of <a href="https://en.wikipedia.org/wiki/Scientometrics">scientometric</a> sources:</p>

<ul>
<li>
<a href="http://europepmc.org/RestfulWebService">EuropePMC REST Web Service</a> - access to all publications indexed by <a href="http://europepmc.org/">EuropePMC</a>
</li>
<li><a href="http://plus.europepmc.org/GristAPI/">EuropePMC Grist API</a></li>
<li>
<a href="http://api.altmetric.com/">Altmetric</a> - Social media impact of articles with PMIDs / DOIs</li>
</ul>

<p>PMIDs (described below) are used throughout as the original application of the caller was on biomedical literature, but the code could be adapted to work with DOIs (which may be more suitable for Altmetric records, which sometimes have a DOI but no PMID).</p>

<blockquote>
<p>A PMID (PubMed identifier or PubMed unique identifier) is a unique number assigned to each PubMed record. A PMID is not the same as a PMCID which is the identifier for all works published in the free-to-access PubMed Central.
-- <a href="https://en.wikipedia.org/wiki/PubMed">PubMed on Wikipedia</a></p>
</blockquote>

<p>This tool then calls the API with each PMID, respecting rate limits, and returns the data from that API.</p>

<p>This is one of my first projects in Ruby, so please forgive some of the crimes against Ruby in here.</p>

<h1>
<a id="use" class="anchor" href="#use" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use</h1>

<p>Can be called via the command line. The only two necessary arguments are input .csv file of PMIDs and the API to call:</p>

<pre><code>sah altmetric.csv -a altmetric
</code></pre>

<p>The output file can be specified:</p>

<pre><code>sah ~/Documents/pmids.csv -a epmc -o ~/Documents/output.csv
</code></pre>

<h2>
<a id="io" class="anchor" href="#io" aria-hidden="true"><span class="octicon octicon-link"></span></a>I/O</h2>

<p>Inputs and outputs:
Input</p>

<pre><code>a) A list of PMIDs
b) A list of grantIDs
</code></pre>

<p>Output</p>

<pre><code>a) CSV with EPMC metadata, including grantID and grant details, Altmetric data
</code></pre>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>[x] Aim for a command line interface which takes a .csv of PMIDs as input alongside flags for each API to call</li>
<li>[ ] Look in to citations - can we pull in the complete list of citations?</li>
<li>[ ] Completely refactor

<ul>
<li>[x] Command line interface (in bin, read Pickaxe first)</li>
</ul>
</li>
<li>[ ] Catch errors with URL handling</li>
<li>[ ] Raise errors if PMIDs aren't valid</li>
<li>[ ] Create tests for new ORCID API integration</li>
</ul>

<h3>
<a id="sample-search-strings" class="anchor" href="#sample-search-strings" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sample search strings</h3>

<p>PubMedCentral and EuropePubmedCentral and the Grant Lookup Tool are a bit of a nightmare in terms of their search syntax. Examples below:</p>

<p><a href="http://europepmc.org/GrantLookup/details.php?all=&amp;init=&amp;name=&amp;title=&amp;key=&amp;i=&amp;gid=082178&amp;f%5B%5D=ACT&amp;f%5B%5D=ARC&amp;f%5B%5D=FWF&amp;f%5B%5D=BBSRC&amp;f%5B%5D=BBC&amp;f%5B%5D=BCC&amp;f%5B%5D=BHF&amp;f%5B%5D=CRUK&amp;f%5B%5D=CSO&amp;f%5B%5D=DUK&amp;f%5B%5D=DMT&amp;f%5B%5D=ERC&amp;f%5B%5D=MCCC&amp;f%5B%5D=MRC&amp;f%5B%5D=MNDA&amp;f%5B%5D=MSS&amp;f%5B%5D=MT&amp;f%5B%5D=NC3RS&amp;f%5B%5D=DH&amp;f%5B%5D=PUK&amp;f%5B%5D=PCUK&amp;f%5B%5D=TI&amp;f%5B%5D=WT&amp;f%5B%5D=WCR&amp;f%5B%5D=YCR&amp;uid=8486&amp;bid=3">http://europepmc.org/GrantLookup/details.php?all=&amp;init=&amp;name=&amp;title=&amp;key=&amp;i=&amp;gid=082178&amp;f%5B%5D=ACT&amp;f%5B%5D=ARC&amp;f%5B%5D=FWF&amp;f%5B%5D=BBSRC&amp;f%5B%5D=BBC&amp;f%5B%5D=BCC&amp;f%5B%5D=BHF&amp;f%5B%5D=CRUK&amp;f%5B%5D=CSO&amp;f%5B%5D=DUK&amp;f%5B%5D=DMT&amp;f%5B%5D=ERC&amp;f%5B%5D=MCCC&amp;f%5B%5D=MRC&amp;f%5B%5D=MNDA&amp;f%5B%5D=MSS&amp;f%5B%5D=MT&amp;f%5B%5D=NC3RS&amp;f%5B%5D=DH&amp;f%5B%5D=PUK&amp;f%5B%5D=PCUK&amp;f%5B%5D=TI&amp;f%5B%5D=WT&amp;f%5B%5D=WCR&amp;f%5B%5D=YCR&amp;uid=8486&amp;bid=3</a></p>

<p><a href="http://europepmc.org/search?query=PUB_TYPE%3A%22practice%20guideline%22%20NICE">Nice publications</a></p>

<h2>
<a id="scratchpad" class="anchor" href="#scratchpad" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scratchpad</h2>

<p>PMID </p>

<ol>
<li>Lookup on EPMC, get metadata including grantID</li>
<li>grantID lookup on GRIST - metadata for grant</li>
<li>lookup grantID on EPMC using string like
(GRANT_ID:"082178" OR GRANT_ID:"WT082178") GRANT_AGENCY:"Wellcome Trust"
(GRANT_ID:"082178" OR GRANT_ID:"WT082178") GRANT_AGENCY:"Wellcome Trust" AND PUB_TYPE:"practice guideline"</li>
</ol>

<h2>
<a id="error-handling" class="anchor" href="#error-handling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Error handling</h2>

<p>I keep encountering an error when attempting a batch:
<a href="http://api.altmetric.com/v1/pmid/23197817">http://api.altmetric.com/v1/pmid/23197817</a> causes issues due to there being no context data, unlike for every other entry in existence.</p>

<p>Erroring entries:</p>

<ul>
<li>In 003, 23197817</li>
<li>In 017, 22182802</li>
<li>In 026, 22826610</li>
<li>In 031, 23251783</li>
<li>20390432</li>
<li>21073404</li>
</ul>

<p><strong>It's possible that I skipped over all old pmids (those without 8 digits) due to this line of code:</strong></p>

<blockquote>
<pre><code>  next if !(pmid[0] =~ /\d{8}/) # Skip if not a valid pmid
</code></pre>
</blockquote>

<h2>
<a id="further-resources--similar-projects" class="anchor" href="#further-resources--similar-projects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Further resources / similar projects</h2>

<ul>
<li>
<a href="http://www.pmid2doi.org/">PMID to DOI converter</a> as used in ScholarNinja's <a href="https://github.com/ScholarNinja/importer">Importer</a>
</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Scientometric-API-handler maintained by <a href="https://github.com/jdkram">jdkram</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
